
# Application Settings
APP_NAME=Safar API
APP_VERSION=1.0.0
API_V1_PREFIX=/api/v1
DEBUG=False
ENVIRONMENT=production

# Server Configuration
HOST=0.0.0.0
PORT=8000
BACKEND_PORT=8010

# Database Configuration (PostgreSQL with PostGIS)
POSTGRES_USER=safar_user
POSTGRES_PASSWORD=CHANGE_THIS_STRONG_PASSWORD
POSTGRES_SERVER=postgres
POSTGRES_PORT=5432
POSTGRES_DB=safar_db

# Full database URL (optional, will be auto-generated if not provided)
# Format: postgresql+asyncpg://user:password@host:port/database
DATABASE_URL=postgresql+asyncpg://safar_user:CHANGE_THIS_STRONG_PASSWORD@postgres:5432/safar_db

# PostgreSQL Read Replica Configuration (for high availability)
# Comma-separated list of replica URLs for load balancing read queries
POSTGRES_READ_REPLICA_URL=postgresql+asyncpg://safar_user:CHANGE_THIS_STRONG_PASSWORD@postgres-replica-1:5432/safar_db,postgresql+asyncpg://safar_user:CHANGE_THIS_STRONG_PASSWORD@postgres-replica-2:5432/safar_db
POSTGRES_READ_REPLICA_ENABLED=True

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD

# Full Redis URL (optional, will be auto-generated if not provided)
# Format: redis://:password@host:port/db
REDIS_URL=redis://:CHANGE_THIS_REDIS_PASSWORD@redis:6379/0

# Redis Cluster Configuration (for high availability)
REDIS_CLUSTER_ENABLED=True
# Comma-separated list of cluster nodes (e.g., 'redis-1:6379,redis-2:6379,redis-3:6379')
REDIS_CLUSTER_NODES=redis-cluster-1:6379,redis-cluster-2:6379,redis-cluster-3:6379

# Security & Authentication
# CRITICAL: Generate a strong secret key using: openssl rand -hex 32
# Must be at least 32 characters long
SECRET_KEY=CHANGE_THIS_GENERATE_STRONG_SECRET_KEY_USING_OPENSSL_RAND_HEX_32
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# 2FA Configuration
MFA_REVERIFICATION_MINUTES=30

# OAuth2 Providers
# Google OAuth
GOOGLE_CLIENT_ID=your_google_client_id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_google_client_secret

# Apple OAuth
APPLE_CLIENT_ID=your_apple_client_id
APPLE_CLIENT_SECRET=your_apple_client_secret

# Facebook OAuth
FACEBOOK_APP_ID=your_facebook_app_id
FACEBOOK_APP_SECRET=your_facebook_app_secret

# GitHub OAuth
GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret

# SMS/OTP Configuration (Twilio)
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890

# Push Notifications (FCM - Firebase Cloud Messaging)
FCM_SERVER_KEY=your_fcm_server_key
FCM_PROJECT_ID=your_fcm_project_id
FCM_SERVICE_ACCOUNT_KEY=your_fcm_service_account_json_key

# CDN Configuration
# CDN Type: 'cloudflare', 'cloudfront', or 's3'
CDN_TYPE=cloudflare
CDN_BASE_URL=https://cdn.safar.com
CDN_BASE_PATH=images

# Cloudflare Configuration (if CDN_TYPE=cloudflare)
CLOUDFLARE_ACCOUNT_ID=your_cloudflare_account_id
CLOUDFLARE_API_TOKEN=your_cloudflare_api_token
CLOUDFLARE_ZONE_ID=your_cloudflare_zone_id

# AWS CloudFront Configuration (if CDN_TYPE=cloudfront)
CLOUDFRONT_DOMAIN=d1234abcd.cloudfront.net
CLOUDFRONT_DISTRIBUTION_ID=E1234567890ABC
S3_BUCKET_NAME=safar-images-bucket

# File Storage Configuration
# Storage Type: 'local', 's3', 'minio', or 'cloudinary'
STORAGE_TYPE=minio

# AWS S3 Configuration (if STORAGE_TYPE=s3)
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key
AWS_REGION=us-east-1
AWS_S3_BUCKET=safar-files-bucket

# MinIO Configuration (if STORAGE_TYPE=minio)
MINIO_ENDPOINT=minio
MINIO_PORT=9000
MINIO_ACCESS_KEY=CHANGE_THIS_MINIO_ACCESS_KEY
MINIO_SECRET_KEY=CHANGE_THIS_MINIO_SECRET_KEY
MINIO_BUCKET_NAME=safar-files
MINIO_USE_SSL=False
MINIO_URL=http://minio:9000

# Cloudinary Configuration (if STORAGE_TYPE=cloudinary)
CLOUDINARY_CLOUD_NAME=your_cloudinary_cloud_name
CLOUDINARY_API_KEY=your_cloudinary_api_key
CLOUDINARY_API_SECRET=your_cloudinary_api_secret

# Upload Limits (in bytes, default: 10MB)
MAX_UPLOAD_SIZE=10485760

# Email Configuration (SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_smtp_user@example.com
SMTP_PASSWORD=your_smtp_app_password
SMTP_FROM_EMAIL=noreply@safar.com
SMTP_FROM_NAME=Safar

# Payment Gateways
# Stripe Configuration
STRIPE_SECRET_KEY=sk_live_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_live_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_stripe_webhook_secret

# Apple Pay Configuration (via Stripe)
APPLE_PAY_DOMAIN_ASSOCIATION=your_apple_pay_domain_association_file_content
APPLE_PAY_MERCHANT_ID=merchant.com.safar.app

# Google Pay Configuration (via Stripe)
GOOGLE_PAY_MERCHANT_ID=your_google_pay_merchant_id

# PayPal Configuration
PAYPAL_CLIENT_ID=your_paypal_client_id
PAYPAL_CLIENT_SECRET=your_paypal_client_secret

# M-Pesa Configuration (Kenya, Tanzania, East Africa)
MPESA_CONSUMER_KEY=your_mpesa_consumer_key
MPESA_CONSUMER_SECRET=your_mpesa_consumer_secret
MPESA_SHORTCODE=your_mpesa_shortcode
MPESA_PASSKEY=your_mpesa_passkey
MPESA_CALLBACK_URL=https://api.safar.com/webhooks/mpesa

# Fawry Configuration (Egypt)
FAWRY_MERCHANT_CODE=your_fawry_merchant_code
FAWRY_SECURE_KEY=your_fawry_secure_key
FAWRY_RETURN_URL=https://safar.com/payment/fawry/return

# Klarna Configuration (Buy Now Pay Later - Europe, US)
KLARNA_USERNAME=your_klarna_username
KLARNA_PASSWORD=your_klarna_password
KLARNA_SUCCESS_URL=https://safar.com/payment/klarna/success
KLARNA_FAILURE_URL=https://safar.com/payment/klarna/failure
KLARNA_CANCEL_URL=https://safar.com/payment/klarna/cancel

# Tamara Configuration (Buy Now Pay Later - Middle East)
TAMARA_TOKEN=your_tamara_token

# Tabby Configuration (Buy Now Pay Later - UAE, Saudi Arabia)
TABBY_SECRET_KEY=your_tabby_secret_key
TABBY_MERCHANT_CODE=your_tabby_merchant_code

# AI Services
OPENAI_API_KEY=sk-your_openai_api_key
OPENAI_MODEL=gpt-4o

# Monitoring & Error Tracking
# Sentry Configuration
SENTRY_DSN=https://your_sentry_dsn@sentry.io/your_project_id
SENTRY_ENVIRONMENT=production

# OpenTelemetry Configuration (Distributed Tracing)
OTEL_ENABLED=True
OTEL_EXPORTER_OTLP_ENDPOINT=http://tempo:4318/v1/traces
OTEL_EXPORTER_OTLP_HEADERS=Authorization=Bearer your_token
OTEL_EXPORTER_JAEGER_ENDPOINT=jaeger:6831
OTEL_SERVICE_NAME=safar-api

# CORS Configuration
# Comma-separated list of allowed origins (NO wildcards allowed in production!)
CORS_ORIGINS=https://safar.com,https://www.safar.com,https://app.safar.com
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_ALLOW_HEADERS=Content-Type,Authorization,Accept,X-Requested-With,X-CSRF-Token
CORS_ALLOW_CREDENTIALS=True

# Rate Limiting
RATE_LIMIT_ENABLED=True
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# Booking Configuration
BOOKING_MAX_WINDOW_DAYS=365
BOOKING_MIN_ADVANCE_HOURS=0
BOOKING_MAX_ADVANCE_DAYS=730

# Multi-tenancy Configuration
MULTI_TENANCY_ENABLED=True

# Localization
DEFAULT_LANGUAGE=ar
SUPPORTED_LANGUAGES=ar,en,fr,es
DEFAULT_CURRENCY=USD
SUPPORTED_CURRENCIES=USD,EUR,GBP,SAR,AED,EGP

# Search Configuration
ENABLE_VECTOR_SEARCH=True
SEARCH_RESULTS_LIMIT=50

# WebSocket Configuration
WEBSOCKET_ENABLED=True
WEBSOCKET_HEARTBEAT_INTERVAL=30

# Monitoring & Development Tools
# Flower (Celery Monitoring) - Optional
FLOWER_PORT=5555

# Base URL Configuration
# Base URL for the API (used in email links, webhooks, etc.)
BASE_URL=https://api.safar.com
